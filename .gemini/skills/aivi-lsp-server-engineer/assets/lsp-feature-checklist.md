# AIVI LSP Feature Checklist

- [ ] Parse with recovery; produce CST + diagnostics
- [ ] Line index + position/range mapping
- [ ] Module graph (imports/exports), incremental rebuild
- [ ] Symbol table + scope tree (shadowing)
- [ ] HIR with stable IDs; CST↔HIR mapping
- [ ] Type inference cache; typed holes; pretty types
- [ ] Domain resolution results surfaced to IDE
- [ ] Diagnostics with codes, labels, and quick fixes
- [ ] Hover: kind + type + resolved domain/operator
- [ ] Definition across modules
- [ ] References scope-safe
- [ ] Rename scope-safe + workspace edits
- [ ] Completion: identifiers, members, constructors, domains
- [ ] Signature help
- [ ] Semantic tokens (identifiers, domains, literals, keywords)
- [ ] Formatting via `aivi fmt` (doc + range)
- [ ] Code actions for common spec “nags”
- [ ] Performance: snapshot caches, cancellation, no UI jank
- [ ] Golden tests: positions → expected LSP responses
