@no_prelude
module examples.compiler.stats
export sum, mean

use examples.compiler.math (add)

sum = xs => xs ?
  | []        => 0
  | [h, ...t] => add h (sum t)

sumCount = xs => xs ?
  | []        => (0, 0)
  | [h, ...t] => (sumCount t) ?
  | (s, n)    => (h + s, n + 1)

mean = xs => (sumCount xs) ?
  | (_, n) when n == 0 => 0
  | (s, n)             => s / n
