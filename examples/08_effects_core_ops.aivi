module examples.runtime_effects_core_ops
export main

use aivi.console (print)

main : Effect Text Unit
main = effect {
  n <- pure 41
  m <- bind (pure n) (x => pure (x + 1))

  res <- attempt (if m == 42 then fail "boom" else pure m)

  verdict <- res ?
    | Ok (x)  => pure "ok"
    | Err (e) => pure "err"

  _ <- print verdict

  _ <- if m > 40 then effect {
    _ <- print "branch"
  } else pure Unit
}
